\documentclass[11pt,twoside]{article}
\usepackage{geometry}
\usepackage{hyperref}
\usepackage{xcolor}
\usepackage{recipe}
\IfFileExists{graphicx.sty}{
  \usepackage{graphicx}
}{}
\geometry{margin=1in}
\providecommand{\tightlist}{}

% Optional packages (graceful fallback if not installed).
\IfFileExists{fontspec.sty}{
  \usepackage{fontspec}
}{}
\IfFileExists{microtype.sty}{
  \usepackage{microtype}
}{}
\IfFileExists{titlesec.sty}{
  \usepackage{titlesec}
}{}
\IfFileExists{enumitem.sty}{
  \usepackage{enumitem}
}{}
\IfFileExists{titling.sty}{
  \usepackage{titling}
}{}
\IfFileExists{fancyhdr.sty}{
  \usepackage{fancyhdr}
}{}

% Palette and typography for a fine-dining menu feel.
\definecolor{VCink}{HTML}{000000}
\definecolor{VCaccent}{HTML}{000000}
\definecolor{VCcream}{HTML}{FFFFFF}
\color{VCink}

\IfFileExists{fontspec.sty}{
  \IfFontExistsTF{TeX Gyre Pagella}{
    \setmainfont{TeX Gyre Pagella}
  }{
    \IfFontExistsTF{Latin Modern Roman}{\setmainfont{Latin Modern Roman}}{}
  }
  \IfFontExistsTF{TeX Gyre Heros}{
    \setsansfont{TeX Gyre Heros}
  }{
    \IfFontExistsTF{Latin Modern Sans}{\setsansfont{Latin Modern Sans}}{}
  }
}{}

\setlength{\parindent}{0pt}
\setlength{\parskip}{0.6em}
\linespread{1.05}
\setcounter{secnumdepth}{0}

\hypersetup{
  colorlinks=true,
  linkcolor=VCaccent,
  urlcolor=VCaccent
}

\IfFileExists{titlesec.sty}{
  \titleformat{\section}
    {\Large\scshape\centering\color{VCaccent}}{}{0pt}{}
  \titleformat{\subsection}
    {\large\bfseries\centering}{}{0pt}{}
  \titleformat{\subsubsection}
    {\normalsize\scshape\centering}{}{0pt}{}

  \titlespacing*{\section}{0pt}{1.2em}{0.6em}
  \titlespacing*{\subsection}{0pt}{0.9em}{0.4em}
  \titlespacing*{\subsubsection}{0pt}{0.8em}{0.3em}
}{}

\IfFileExists{enumitem.sty}{
  \setlist[itemize]{leftmargin=*,label=\textbullet,itemsep=0.2em,topsep=0.25em,parsep=0pt,partopsep=0pt}
  \setlist[enumerate]{leftmargin=*,label=\arabic*.}
}{}

% Center content on each page with generous white space.
\newcommand{\VaultChefPageStart}{%
  \vspace*{\fill}%
  \centering%
}
\newcommand{\VaultChefPageEnd}{%
  \par%
  \vspace*{\fill}%
}

\begin{document}
% Title page intentionally omitted so page 1 starts with the first recipe.
\pagestyle{headings}
\IfFileExists{fancyhdr.sty}{
  \pagestyle{fancy}
  \fancyhf{}
  \fancyhead[R]{\small\color{VCink}\underline{\leftmark}}
  \fancyfoot[C]{\small\color{VCink}\thepage}
  \renewcommand{\headrulewidth}{0pt}
  \renewcommand{\footrulewidth}{0pt}
}{}

$if(include_intro_page)$
\thispagestyle{plain}
\begin{center}
  {\Large\scshape\color{VCaccent}$title$}
  $if(subtitle)$

  {\normalsize\color{VCink}$subtitle$}
  $endif$
\end{center}

$if(album_title)$
\section*{Music Pairing}
\begingroup
\setlength{\parskip}{0.25em}
\begin{itemize}
\item \textbf{Album:} $album_title$
$if(album_artist)$
\item \textbf{Artist:} $album_artist$
$endif$
$if(album_style)$
\item \textbf{Style:} $album_style$
$endif$
\end{itemize}
\endgroup
$endif$

$if(shopping_items)$
\section*{Shopping List}
\begingroup
$if(shopping_compact)$
\setlength{\parskip}{0.15em}
$endif$
\begin{itemize}
$for(shopping_items)$
\item $shopping_items$
$endfor$
\end{itemize}
\endgroup
$endif$

\cleardoublepage
$endif$

$body$

\end{document}
